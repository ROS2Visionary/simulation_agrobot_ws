在ROS 2中，有几种不同的Executor和CallbackGroup选项，它们对于控制节点（Node）中回调函数的执行方式和并发性非常重要。

# Executors 执行器

1. **SingleThreadedExecutor（单线程执行器）**：
   - **特点**：所有节点的回调函数都在同一个线程中执行。
   - **优点**：适用于单核或者需要保证回调函数顺序执行的场景。
   - **缺点**：可能会出现阻塞的情况，特别是当某个回调函数执行时间较长时，会影响其他回调函数的响应速度。

2. **MultiThreadedExecutor（多线程执行器）**：
   - **特点**：每个节点的回调函数可以在不同的线程中并发执行。
   - **优点**：提高了系统的响应速度和吞吐量，特别适合多核处理器。
   - **缺点**：需要注意线程安全性和同步问题，可能需要额外的同步机制来处理共享资源的访问。

# Callback Groups 回调组

1. **ReentrantCallbackGroup（可重入回调组）**：
   - **特点**：允许相同回调组内的回调函数在同一时间被多个线程调用。
   - **用途**：适合处理非共享数据或者不需要同步的情况，提高了并行性。
   - **注意**：需要确保回调函数内部的操作是线程安全的，避免数据竞争和意外的行为。

2. **MutuallyExclusiveCallbackGroup（互斥回调组）**：
   - **特点**：确保同一回调组内的回调函数在同一时间只能被一个线程调用。
   - **用途**：适合处理共享数据或者需要严格同步的场景，避免竞态条件和数据不一致。
   - **注意**：可能会降低并行性和系统的响应速度，因为需要等待其他线程释放回调组的锁。

# 选择和使用

- **单线程 vs 多线程执行器**：根据应用场景和硬件配置选择合适的执行器。多线程执行器适合需要提高系统响应速度和并发处理能力的情况，而单线程执行器适合简单的应用或者需要保证回调执行顺序的场景。
  
- **可重入 vs 互斥回调组**：根据回调函数内部的操作和数据访问方式选择合适的回调组。如果回调函数操作不涉及共享资源或者已经有其他同步机制保护共享资源，则可选用可重入回调组以提高并发性；如果需要严格保证共享资源的访问顺序和一致性，则选择互斥回调组。

在实际开发中，理解和合理使用这些Executor和CallbackGroup选项可以有效地优化ROS 2系统的性能和稳定性。